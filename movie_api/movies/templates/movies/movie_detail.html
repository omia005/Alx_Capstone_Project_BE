{% extends "base.html" %}
{% block content %}

<div class="card movie-detail">
    {% if movie.poster %}
        <img src="{{ movie.poster.url }}" class="poster-large">
    {% endif %}

    <div class="movie-info">
        <h1>{{ movie.title }}</h1>
        <p>{{ movie.description }}</p>
        <p><strong>Released:</strong> {{ movie.release_year }}</p>

        {% if user.is_authenticated %}
            <a class="btn" href="{% url 'review-add' movie.pk %}">Add Review</a>
        {% endif %}
    </div>
</div>


<h2>Reviews</h2>

{% for review in movie.reviews.all %}
    <div class="review-card">
        <strong>{{ review.user.username }}</strong>
        <span class="rating">{{ review.rating }}/5 ‚≠ê</span>
        <p>{{ review.content }}</p>

        {% if review.user == user %}
            <a class="btn-sm" href="{% url 'review-edit' review.pk %}">Edit</a>
            <a class="btn-sm danger" href="{% url 'review-delete' review.pk %}">Delete</a>
        {% endif %}
    </div>
{% empty %}
    <p>No reviews yet.</p>
{% endfor %}

{% endblock %}
